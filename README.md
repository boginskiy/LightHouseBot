# Телеграмм бот для Promo.mayak.travel

### **Описание**
Telegram-бот для обработки .xlsx файла и записи данных в Базу данных.

Что делает бот:
* раз в 10 секунд опрашивает API сервиса Телеграмм и проверяет его на наличие каких-либо обновлений;
* при обновлении реализует логику работы. Реагирует на команду запуска /start, текстовые сообщения и файлы .xlsx, отправляет уведомление в чат;
* логирует свою работу и сообщает вам о важных проблемах сообщением в чат.

Дополнительно:

Telegram-бот обрабатывает присланный пользователем файл в формате .xlsx.
Для успешной обработки файл .xlsx должен содержать один лист с таблицой с 3 столбцами (Name, URL, Xpath). Данные записываются  в БД и отправляются ответом пользователю.

### **Технологии**
* python 3.10
* pandas 1.5.2
* openpyxl 3.0.10
* python-dotenv 0.21.0
* python-telegram-bot 13.15

### **Шаблон наполнения env-файла**
Ознакомьтесь с **.env.example** файлом. На его основе со своими данными создайте **.env** файл в директории проекта.

```
.env.example

BOT_TOKEN = 'API токен чат бота'
ID_ADMIN = 'ID чата для администрирования. Например ID чата хозяина бота'
```

У вас должно получиться так:
```
.env

BOT_TOKEN = '5879439590:AAFAfXYX84VM4x-ze2LrSWiMXB9Oi84ELPQ'
ID_ADMIN = 5339829954
```

### **Запуск проекта на Linux**
Клонировать проект c GitHub
```
git clone git@github.com:boginskiy/LightHouseBot.git
```
Установить виртуальное окружение venv
```
python3 -m venv venv
```
Активировать виртуальное окружение venv
```
source venv/bin/activate
```
Обновить менеджер пакетов pip
```
python3 -m pip install --upgrade pip
```
Установить зависимости из файла requirements.txt
```
pip install -r requirements.txt
``` 
Запуск
```
python3 lighthouse.py
```

### **Дополнительная информация**

---

**BOT_TOKEN** - API токен вашего бота получаем путем отправки сообщения _/mybots_ в телеграмм канале _BotFather_, далее кликаем  бота, после проходим по кнопке _API Token_.

**ID_ADMIN** - id вашего чата или любого другого пользователя, наделенного функциями администратора, получаем путем отправки любого сообщения в телеграмм канале _userinfobot_.

---

### **Автор**
[Богинский Дмитрий](https://github.com/boginskiy) - python разработчик
